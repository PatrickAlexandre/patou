<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculatrice Santé et Finance</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</head>
<body class="bg-gray-100">

<div class="max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg mt-10">
  <h1 class="text-2xl font-bold text-center mb-5">Calculatrice Santé et Finance</h1>
  
  <!-- Formulaire -->
  <form id="calculatrice-form" class="space-y-4">
    <div class="flex flex-wrap gap-4">
      <div class="flex-1">
        <label class="block font-semibold">Nom <span class="text-red-500">*</span></label>
        <input type="text" id="nom" class="w-full border-gray-300 rounded-md shadow-sm" required>
      </div>
      <div class="flex-1">
        <label class="block font-semibold">Prénom <span class="text-red-500">*</span></label>
        <input type="text" id="prenom" class="w-full border-gray-300 rounded-md shadow-sm" required>
      </div>
    </div>

    <div class="flex flex-wrap gap-4">
      <div class="flex-1">
        <label class="block font-semibold">Date de naissance 🎂</label>
        <input type="date" id="date_naissance" class="w-full border-gray-300 rounded-md shadow-sm">
      </div>
      <div class="flex-1">
        <label class="block font-semibold">Taille (cm) 📏</label>
        <input type="number" id="taille" min="50" max="250" class="w-full border-gray-300 rounded-md shadow-sm">
      </div>
      <div class="flex-1">
        <label class="block font-semibold">Poids (kg) ⚖️</label>
        <input type="number" id="poids" min="10" max="300" class="w-full border-gray-300 rounded-md shadow-sm">
      </div>
    </div>

    <div class="flex flex-wrap gap-4">
      <div class="flex-1">
        <label class="block font-semibold">Niveau d'activité physique (NAP) 🏃</label>
        <input type="range" id="nap" min="1" max="2.5" step="0.1" class="w-full">
      </div>
      <div class="flex-1">
        <label class="block font-semibold">Revenus (€) 💶</label>
        <input type="number" id="revenus" min="0" class="w-full border-gray-300 rounded-md shadow-sm">
      </div>
      <div class="flex-1">
        <label class="block font-semibold">Dépenses (€) 💸</label>
        <input type="number" id="depenses" min="0" class="w-full border-gray-300 rounded-md shadow-sm">
      </div>
    </div>
  </form>

  <!-- Section Résultats -->
  <div class="mt-6 flex justify-between space-x-4">
    <!-- Résultats Financiers -->
    <div class="flex-1 bg-blue-100 p-4 rounded-lg">
      <h2 class="text-xl font-bold text-blue-700">Argent <i class="fas fa-euro-sign"></i></h2>
      <p><strong>Pourcentage Dépenses/Revenus (%) 💸 :</strong> <span id="pourcentage_depenses"></span></p>
      <p><strong>Dépenses Restantes (€) 🏦 :</strong> <span id="depenses_restant"></span></p>
      <p><strong>Épargne Annuelle (€) 💰 :</strong> <span id="epargne_annuelle"></span></p>
    </div>

    <!-- Résultats Santé -->
    <div class="flex-1 bg-green-100 p-4 rounded-lg">
      <h2 class="text-xl font-bold text-green-700">Santé <i class="fas fa-heartbeat"></i></h2>
      <p><strong>Âge 🧑‍🎓 :</strong> <span id="age"></span></p>
      <p><strong>IMC 🏋️‍♂️ :</strong> <span id="imc"></span></p>
      <p><strong>Poids Idéal 🏆 :</strong> <span id="poids_ideal"></span></p>
      <p><strong>Besoins Caloriques Journaliers 🍏 :</strong> <span id="calories"></span></p>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    $("#calculatrice-form input").on("input", function () {
      const dateNaissance = $("#date_naissance").val();
      const taille = parseFloat($("#taille").val());
      const poids = parseFloat($("#poids").val());
      const nap = parseFloat($("#nap").val());
      const revenus = parseFloat($("#revenus").val());
      const depenses = parseFloat($("#depenses").val());

      // Calcul de l'âge
      let age = dateNaissance ? moment().diff(dateNaissance, 'years') : '';
      $("#age").text(age);

      // Calcul de l'IMC
      let imc = (poids && taille) ? (poids / ((taille / 100) ** 2)).toFixed(2) : '';
      $("#imc").text(imc);

      // Calcul du poids idéal
      let poidsIdeal = taille ? (50 + 0.91 * (taille - 152)).toFixed(2) : '';
      $("#poids_ideal").text(poidsIdeal);

      // Calcul du BMR
      let bmr = poids ? (10 * poids + 6.25 * taille - 5 * age + 5) : '';
      let calories = (bmr && nap) ? (bmr * nap).toFixed(0) : '';
      $("#calories").text(calories);

      // Calcul financier
      let pourcentageDepenses = (revenus && depenses) ? ((depenses / revenus) * 100).toFixed(2) + "%" : '';
      $("#pourcentage_depenses").text(pourcentageDepenses);

      let depensesRestant = (revenus && depenses) ? (revenus - depenses).toFixed(2) : '';
      $("#depenses_restant").text(depensesRestant);

      let epargneAnnuelle = (revenus && depenses) ? ((revenus - depenses) * 12).toFixed(2) : '';
      $("#epargne_annuelle").text(epargneAnnuelle);
    });
  });
</script>

</body>
</html>
